(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["Goals"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["Goals"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,a){return function(e){var t={};function a(l){if(t[l])return t[l].exports;var o=t[l]={i:l,l:!1,exports:{}};return e[l].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,l){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(a.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(l,o,function(t){return e[t]}.bind(null,o));return l},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="plugins/Goals/vue/dist/",a(a.s="fae3")}({"19dc":function(t,a){t.exports=e},"8bbf":function(e,a){e.exports=t},a5a2:function(e,t){e.exports=a},fae3:function(e,t,a){"use strict";if(a.r(t),a.d(t,"GoalPageLink",(function(){return c})),a.d(t,"ManageGoals",(function(){return Ge})),a.d(t,"ManageGoalsStore",(function(){return ve})),"undefined"!==typeof window){var l=window.document.currentScript,o=l&&l.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(a.p=o[1])}var n=a("19dc");
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
const{$:r}=window,i={mounted(e,t){if(!n["Matomo"].helper.isReportingPage())return;const a=r(e).text(),l=r("<a></a>");l.text(a),l.attr("title",Object(n["translate"])("Goals_ClickToViewThisGoal")),l.click(e=>{e.preventDefault(),n["MatomoUrl"].updateHash(Object.assign(Object.assign({},n["MatomoUrl"].hashParsed.value),{},{category:"Goals_Goals",subcategory:t.value.idGoal}))}),r(e).html(l[0])}};var c=i;n["Matomo"].on("Matomo.processDynamicHtml",e=>{e.find("[goal-page-link]").each((e,t)=>{if(r(t).attr("goal-page-link-handled"))return;const a=r(t).attr("goal-page-link");a&&i.mounted(t,{instance:null,value:{idGoal:a},oldValue:null,modifiers:{},dir:{}}),r(t).attr("goal-page-link-handled","1")})});var s=a("8bbf");const d={class:"manageGoals"},u={id:"entityEditContainer",feature:"true",class:"managegoals"},b={class:"contentHelp"},m=["innerHTML"],p={key:0},O=Object(s["createElementVNode"])("br",null,null,-1),j=Object(s["createElementVNode"])("br",null,null,-1),h=["innerHTML"],g={class:"first"},v={key:1},y={key:0},_={colspan:"8"},G=Object(s["createElementVNode"])("br",null,null,-1),E=Object(s["createElementVNode"])("br",null,null,-1),V=Object(s["createElementVNode"])("br",null,null,-1),N=["id"],w={class:"first"},f={class:"matchAttribute"},S={key:0},T={key:1},D=Object(s["createElementVNode"])("br",null,null,-1),C=["innerHTML"],k={key:1,style:{"padding-top":"2px"}},x=["onClick","title"],M=["onClick","title"],A={key:0,class:"tableActionBar"},B=Object(s["createElementVNode"])("span",{class:"icon-add"},null,-1),L={class:"ui-confirm",ref:"confirm"},H=["value"],F=["value"],U={class:"addEditGoal"},P=["innerHTML"],$={class:"row goalIsTriggeredWhen"},I={class:"col s12"},R={class:"row"},z={class:"col s12 m6 goalTriggerType"},q={class:"col s12 m6"},W=["innerHTML"],J={class:"row whereTheMatchAttrbiute"},Y={class:"col s12"},K={class:"row"},Q={class:"col s12 m6 l4"},X={key:0,class:"col s12 m6 l4"},Z={key:1,class:"col s12 m6 l4"},ee={class:"col s12 m6 l4"},te={id:"examples_pattern",class:"col s12"},ae=Object(s["createElementVNode"])("br",null,null,-1),le=Object(s["createElementVNode"])("br",null,null,-1),oe=Object(s["createElementVNode"])("br",null,null,-1),ne=Object(s["createElementVNode"])("br",null,null,-1),re=Object(s["createElementVNode"])("br",null,null,-1),ie=Object(s["createElementVNode"])("br",null,null,-1),ce=Object(s["createElementVNode"])("br",null,null,-1),se=Object(s["createElementVNode"])("br",null,null,-1),de={ref:"endedittable"},ue=Object(s["createElementVNode"])("input",{type:"hidden",name:"goalIdUpdate",value:""},null,-1),be={key:0},me=["innerHTML"],pe=Object(s["createElementVNode"])("a",{id:"bottom"},null,-1);function Oe(e,t,a,l,o,n){var r;const i=Object(s["resolveComponent"])("ActivityIndicator"),c=Object(s["resolveComponent"])("ContentBlock"),Oe=Object(s["resolveComponent"])("Field"),je=Object(s["resolveComponent"])("Alert"),he=Object(s["resolveComponent"])("VueEntryContainer"),ge=Object(s["resolveComponent"])("SaveButton"),ve=Object(s["resolveDirective"])("content-table"),ye=Object(s["resolveDirective"])("form");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",d,[Object(s["withDirectives"])(Object(s["createElementVNode"])("div",null,[Object(s["withDirectives"])(Object(s["createElementVNode"])("div",u,[Object(s["createVNode"])(c,{"content-title":e.translate("Goals_ManageGoals")},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(i,{loading:e.isLoading},null,8,["loading"]),Object(s["createElementVNode"])("div",b,[Object(s["createElementVNode"])("span",{innerHTML:e.$sanitize(e.learnMoreAboutGoalTracking)},null,8,m),e.ecommerceEnabled?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",p,[O,j,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("Goals_Optional"))+" "+Object(s["toDisplayString"])(e.translate("Goals_Ecommerce"))+": ",1),Object(s["createElementVNode"])("span",{innerHTML:e.$sanitize(e.youCanEnableEcommerceReports)},null,8,h)]))]),Object(s["withDirectives"])((Object(s["openBlock"])(),Object(s["createElementBlock"])("table",null,[Object(s["createElementVNode"])("thead",null,[Object(s["createElementVNode"])("tr",null,[Object(s["createElementVNode"])("th",g,Object(s["toDisplayString"])(e.translate("General_Id")),1),Object(s["createElementVNode"])("th",null,Object(s["toDisplayString"])(e.translate("Goals_GoalName")),1),Object(s["createElementVNode"])("th",null,Object(s["toDisplayString"])(e.translate("General_Description")),1),Object(s["createElementVNode"])("th",null,Object(s["toDisplayString"])(e.translate("Goals_GoalIsTriggeredWhen")),1),Object(s["createElementVNode"])("th",null,Object(s["toDisplayString"])(e.translate("General_ColumnRevenue")),1),e.beforeGoalListActionsHeadComponent?(Object(s["openBlock"])(),Object(s["createBlock"])(Object(s["resolveDynamicComponent"])(e.beforeGoalListActionsHeadComponent),{key:0})):Object(s["createCommentVNode"])("",!0),e.userCanEditGoals?(Object(s["openBlock"])(),Object(s["createElementBlock"])("th",v,Object(s["toDisplayString"])(e.translate("General_Actions")),1)):Object(s["createCommentVNode"])("",!0)])]),Object(s["createElementVNode"])("tbody",null,[Object.keys(e.goals||{}).length?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("tr",y,[Object(s["createElementVNode"])("td",_,[G,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("Goals_ThereIsNoGoalToManage",e.siteName))+" ",1),E,V])])),(Object(s["openBlock"])(!0),Object(s["createElementBlock"])(s["Fragment"],null,Object(s["renderList"])(e.goals||[],t=>(Object(s["openBlock"])(),Object(s["createElementBlock"])("tr",{id:t.idgoal,key:t.idgoal},[Object(s["createElementVNode"])("td",w,Object(s["toDisplayString"])(t.idgoal),1),Object(s["createElementVNode"])("td",null,Object(s["toDisplayString"])(t.name),1),Object(s["createElementVNode"])("td",null,Object(s["toDisplayString"])(t.description),1),Object(s["createElementVNode"])("td",null,[Object(s["createElementVNode"])("span",f,Object(s["toDisplayString"])(e.goalMatchAttributeTranslations[t.match_attribute]||t.match_attribute),1),"visit_duration"===t.match_attribute?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",S,Object(s["toDisplayString"])(e.lcfirst(e.translate("General_OperationGreaterThan")))+" "+Object(s["toDisplayString"])(e.translate("Intl_NMinutes",t.pattern)),1)):t.pattern_type?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",T,[D,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("Goals_Pattern"))+" "+Object(s["toDisplayString"])(t.pattern_type)+": "+Object(s["toDisplayString"])(t.pattern),1)])):Object(s["createCommentVNode"])("",!0)]),Object(s["createElementVNode"])("td",{class:"center",innerHTML:e.$sanitize(0===t.revenue||"0"===t.revenue?"-":t.revenue_pretty)},null,8,C),e.beforeGoalListActionsBodyComponent[t.idgoal]?(Object(s["openBlock"])(),Object(s["createBlock"])(Object(s["resolveDynamicComponent"])(e.beforeGoalListActionsBodyComponent[t.idgoal]),{key:0})):Object(s["createCommentVNode"])("",!0),e.userCanEditGoals?(Object(s["openBlock"])(),Object(s["createElementBlock"])("td",k,[e.userCanEditGoals?(Object(s["openBlock"])(),Object(s["createElementBlock"])("button",{key:0,onClick:a=>e.editGoal(t.idgoal),class:"table-action icon-edit",title:e.translate("General_Edit")},null,8,x)):Object(s["createCommentVNode"])("",!0),e.userCanEditGoals?(Object(s["openBlock"])(),Object(s["createElementBlock"])("button",{key:1,onClick:a=>e.deleteGoal(t.idgoal),class:"table-action icon-delete",title:e.translate("General_Delete")},null,8,M)):Object(s["createCommentVNode"])("",!0)])):Object(s["createCommentVNode"])("",!0)],8,N))),128))])])),[[ve]]),e.userCanEditGoals&&!e.onlyShowAddNewGoal?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",A,[Object(s["createElementVNode"])("button",{id:"add-goal",onClick:t[0]||(t[0]=t=>e.createGoal())},[B,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("Goals_AddNewGoal")),1)])])):Object(s["createCommentVNode"])("",!0)]),_:1},8,["content-title"])],512),[[s["vShow"],e.showGoalList]]),Object(s["createElementVNode"])("div",L,[Object(s["createElementVNode"])("h2",null,Object(s["toDisplayString"])(e.translate("Goals_DeleteGoalConfirm",`"${null===(r=e.goalToDelete)||void 0===r?void 0:r.name}"`)),1),Object(s["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,H),Object(s["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,F)],512)],512),[[s["vShow"],!e.onlyShowAddNewGoal]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("div",null,[Object(s["withDirectives"])(Object(s["createElementVNode"])("div",U,[Object(s["createVNode"])(c,{"content-title":e.goal.idgoal?e.translate("Goals_UpdateGoal"):e.translate("Goals_AddNewGoal")},{default:Object(s["withCtx"])(()=>[Object(s["createElementVNode"])("div",{innerHTML:e.$sanitize(e.addNewGoalIntro)},null,8,P),Object(s["withDirectives"])((Object(s["openBlock"])(),Object(s["createElementBlock"])("div",null,[Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(Oe,{uicontrol:"text",name:"goal_name",modelValue:e.goal.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.goal.name=t),maxlength:50,title:e.translate("Goals_GoalName"),onChange:e.goalNameChanged},null,8,["modelValue","title","onChange"])]),Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(Oe,{uicontrol:"text",name:"goal_description",modelValue:e.goal.description,"onUpdate:modelValue":t[2]||(t[2]=t=>e.goal.description=t),maxlength:255,title:e.translate("General_Description")},null,8,["modelValue","title"])]),Object(s["createElementVNode"])("div",$,[Object(s["createElementVNode"])("div",I,[Object(s["createElementVNode"])("h3",null,Object(s["toDisplayString"])(e.translate("Goals_GoalIsTriggered")),1)])]),Object(s["createElementVNode"])("div",R,[Object(s["createElementVNode"])("div",z,[Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(Oe,{uicontrol:"select",name:"trigger_type","model-value":e.triggerType,"onUpdate:modelValue":t[3]||(t[3]=t=>{e.triggerType=t,e.changedTriggerType()}),"full-width":!0,options:e.goalTriggerTypeOptions},null,8,["model-value","options"])])]),Object(s["createElementVNode"])("div",q,[Object(s["withDirectives"])(Object(s["createVNode"])(je,{severity:"info"},{default:Object(s["withCtx"])(()=>[Object(s["createElementVNode"])("span",{innerHTML:e.$sanitize(e.whereVisitedPageManuallyCallsJsTrackerText)},null,8,W)]),_:1},512),[[s["vShow"],"manually"===e.triggerType]]),Object(s["createElementVNode"])("div",null,[Object(s["withDirectives"])(Object(s["createVNode"])(Oe,{uicontrol:"radio",name:"match_attribute","full-width":!0,"model-value":e.goal.match_attribute,"onUpdate:modelValue":t[4]||(t[4]=t=>{e.goal.match_attribute=t,e.initPatternType()}),options:e.goalMatchAttributeOptions},null,8,["model-value","options"]),[[s["vShow"],"manually"!==e.triggerType]])])])]),Object(s["withDirectives"])(Object(s["createElementVNode"])("div",J,[Object(s["createElementVNode"])("h3",Y,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("Goals_WhereThe"))+" ",1),Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(e.translate("Goals_URL")),513),[[s["vShow"],"url"===e.goal.match_attribute]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(e.translate("Goals_PageTitle")),513),[[s["vShow"],"title"===e.goal.match_attribute]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(e.translate("Goals_Filename")),513),[[s["vShow"],"file"===e.goal.match_attribute]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(e.translate("Goals_ExternalWebsiteUrl")),513),[[s["vShow"],"external_website"===e.goal.match_attribute]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(e.translate("Goals_VisitDuration")),513),[[s["vShow"],"visit_duration"===e.goal.match_attribute]])])],512),[[s["vShow"],"manually"!==e.triggerType]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("div",K,[Object(s["withDirectives"])(Object(s["createElementVNode"])("div",Q,[Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(Oe,{uicontrol:"select",name:"event_type",modelValue:e.eventType,"onUpdate:modelValue":t[5]||(t[5]=t=>e.eventType=t),"full-width":!0,options:e.eventTypeOptions},null,8,["modelValue","options"])])],512),[[s["vShow"],"event"===e.goal.match_attribute]]),e.isMatchAttributeNumeric?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",X,[Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(Oe,{uicontrol:"select",name:"pattern_type",modelValue:e.goal.pattern_type,"onUpdate:modelValue":t[6]||(t[6]=t=>e.goal.pattern_type=t),"full-width":!0,options:e.patternTypeOptions},null,8,["modelValue","options"])])])),e.isMatchAttributeNumeric?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",Z,[Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(Oe,{uicontrol:"select",name:"pattern_type",modelValue:e.goal.pattern_type,"onUpdate:modelValue":t[7]||(t[7]=t=>e.goal.pattern_type=t),"full-width":!0,options:e.numericComparisonTypeOptions},null,8,["modelValue","options"])])])):Object(s["createCommentVNode"])("",!0),Object(s["createElementVNode"])("div",ee,[Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(Oe,{uicontrol:"text",name:"pattern",modelValue:e.goal.pattern,"onUpdate:modelValue":t[8]||(t[8]=t=>e.goal.pattern=t),maxlength:255,title:e.patternFieldLabel,"full-width":!0},null,8,["modelValue","title"])])]),Object(s["createElementVNode"])("div",te,[Object(s["createVNode"])(je,{severity:"info"},{default:Object(s["withCtx"])(()=>[Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_Contains","'checkout/confirmation'"))+" ",1),ae,Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_IsExactly","'http://example.com/thank-you.html'"))+" ",1),le,Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_MatchesExpression","'(.*)\\/demo\\/(.*)'")),1)],512),[[s["vShow"],"url"===e.goal.match_attribute]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_Contains","'Order confirmation'")),513),[[s["vShow"],"title"===e.goal.match_attribute]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_Contains","'files/brochure.pdf'"))+" ",1),oe,Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_IsExactly","'http://example.com/files/brochure.pdf'"))+" ",1),ne,Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_MatchesExpression","'(.*)\\.zip'")),1)],512),[[s["vShow"],"file"===e.goal.match_attribute]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_Contains","'amazon.com'"))+" ",1),re,Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_IsExactly","'http://mypartner.com/landing.html'"))+" ",1),ie,Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.matchesExpressionExternal),1)],512),[[s["vShow"],"external_website"===e.goal.match_attribute]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_Contains","'video'"))+" ",1),ce,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_IsExactly","'click'"))+" ",1),se,Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_MatchesExpression","'(.*)_banner'"))+'" ',1)],512),[[s["vShow"],"event"===e.goal.match_attribute]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(e.translate("General_ForExampleShort"))+" "+Object(s["toDisplayString"])(e.translate("Goals_AtLeastMinutes","5","0.5")),513),[[s["vShow"],"visit_duration"===e.goal.match_attribute]])]),_:1})])],512),[[s["vShow"],"manually"!==e.triggerType]]),Object(s["createElementVNode"])("div",null,[Object(s["withDirectives"])(Object(s["createVNode"])(Oe,{uicontrol:"checkbox",name:"case_sensitive",modelValue:e.goal.case_sensitive,"onUpdate:modelValue":t[9]||(t[9]=t=>e.goal.case_sensitive=t),title:e.caseSensitiveTitle},null,8,["modelValue","title"]),[[s["vShow"],"manually"!==e.triggerType&&!e.isMatchAttributeNumeric]])]),Object(s["createElementVNode"])("div",null,["visit_duration"!==e.goal.match_attribute?(Object(s["openBlock"])(),Object(s["createBlock"])(Oe,{key:0,uicontrol:"radio",name:"allow_multiple","model-value":e.goal.allow_multiple&&"0"!==e.goal.allow_multiple?1:0,"onUpdate:modelValue":t[10]||(t[10]=t=>e.goal.allow_multiple=t),options:e.allowMultipleOptions,introduction:e.translate("Goals_AllowMultipleConversionsPerVisit"),"inline-help":e.translate("Goals_HelpOneConversionPerVisit")},null,8,["model-value","options","introduction","inline-help"])):Object(s["createCommentVNode"])("",!0)]),Object(s["createElementVNode"])("h3",null,Object(s["toDisplayString"])(e.translate("Goals_GoalRevenue"))+" "+Object(s["toDisplayString"])(e.translate("Goals_Optional")),1),Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(Oe,{uicontrol:"number",name:"revenue",modelValue:e.goal.revenue,"onUpdate:modelValue":t[11]||(t[11]=t=>e.goal.revenue=t),placeholder:e.translate("Goals_DefaultRevenueLabel"),"inline-help":e.translate("Goals_DefaultRevenueHelp")},null,8,["modelValue","placeholder","inline-help"])]),Object(s["createElementVNode"])("div",null,[Object(s["withDirectives"])(Object(s["createVNode"])(Oe,{uicontrol:"checkbox",name:"use_event_value",modelValue:e.goal.event_value_as_revenue,"onUpdate:modelValue":t[12]||(t[12]=t=>e.goal.event_value_as_revenue=t),title:e.translate("Goals_UseEventValueAsRevenue"),"inline-help":e.useEventValueAsRevenueHelp},null,8,["modelValue","title","inline-help"]),[[s["vShow"],"event"===e.goal.match_attribute]])]),Object(s["createElementVNode"])("div",de,[e.endEditTable?(Object(s["openBlock"])(),Object(s["createBlock"])(he,{key:0,html:e.endEditTable},null,8,["html"])):Object(s["createCommentVNode"])("",!0)],512),ue,Object(s["createVNode"])(ge,{saving:e.isLoading,onConfirm:t[13]||(t[13]=t=>e.save()),value:e.submitText},null,8,["saving","value"]),e.onlyShowAddNewGoal?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",be,[Object(s["withDirectives"])(Object(s["createElementVNode"])("div",{class:"entityCancel",onClick:t[14]||(t[14]=t=>e.showListOfReports()),innerHTML:e.$sanitize(e.cancelText)},null,8,me),[[s["vShow"],e.showEditGoal]])]))])),[[ye]])]),_:1},8,["content-title"])],512),[[s["vShow"],e.showEditGoal]])],512),[[s["vShow"],e.userCanEditGoals]]),pe])}var je=a("a5a2");function he(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class ge{constructor(){he(this,"privateState",Object(s["reactive"])({})),he(this,"idGoal",Object(s["computed"])(()=>this.privateState.idGoal))}setIdGoalShown(e){this.privateState.idGoal=e}}var ve=new ge;function ye(e){return e&&"0"!==e?1:0}var _e=Object(s["defineComponent"])({inheritAttrs:!1,props:{onlyShowAddNewGoal:Boolean,userCanEditGoals:Boolean,ecommerceEnabled:Boolean,goals:{type:Object,required:!0},addNewGoalIntro:String,goalTriggerTypeOptions:Object,goalMatchAttributeOptions:Array,eventTypeOptions:Array,patternTypeOptions:Array,numericComparisonTypeOptions:Array,allowMultipleOptions:Array,showAddGoal:Boolean,showGoal:Number,beforeGoalListActionsBody:Object,endEditTable:String,beforeGoalListActionsHead:String},data(){return{showEditGoal:!1,showGoalList:!0,goal:{},isLoading:!1,eventType:"event_category",triggerType:"visitors",apiMethod:"",submitText:"",goalToDelete:null,addEditTableComponent:!1}},components:{SaveButton:je["SaveButton"],ContentBlock:n["ContentBlock"],ActivityIndicator:n["ActivityIndicator"],Field:je["Field"],Alert:n["Alert"],VueEntryContainer:n["VueEntryContainer"]},directives:{ContentTable:n["ContentTable"],Form:je["Form"]},created(){ve.setIdGoalShown(this.showGoal)},unmounted(){ve.setIdGoalShown(void 0)},mounted(){this.showAddGoal?this.createGoal():this.showGoal?this.editGoal(this.showGoal):this.showListOfReports()},methods:{scrollToTop(){setTimeout(()=>{n["Matomo"].helper.lazyScrollTo(".pageWrap",200)})},initGoalForm(e,t,a,l,o,r,i,c,s,d,u,b){n["Matomo"].postEvent("Goals.beforeInitGoalForm",e,b,a),this.apiMethod=e,this.goal={},this.goal.name=a,this.goal.description=l;let m=o;"manually"===m?(this.triggerType="manually",m="url"):this.triggerType="visitors",0===m.indexOf("event")?(this.eventType=m,m="event"):this.eventType="event_category",this.goal.match_attribute=m,this.goal.allow_multiple=d,this.goal.pattern_type=i,this.goal.pattern=r,this.goal.case_sensitive=c,this.goal.revenue=s,this.goal.event_value_as_revenue=u,this.submitText=t,this.goal.idgoal=b},showListOfReports(){n["Matomo"].postEvent("Goals.cancelForm"),this.showGoalList=!0,this.showEditGoal=!1,this.scrollToTop()},showAddEditForm(){this.showGoalList=!1,this.showEditGoal=!0},createGoal(){const e={isAllowed:!0};n["Matomo"].postEvent("Goals.initAddGoal",e),e&&!e.isAllowed||(this.showAddEditForm(),this.initGoalForm("Goals.addGoal",Object(n["translate"])("Goals_AddGoal"),"","","url","","contains",!1,0,!1,!1,0),this.scrollToTop())},editGoal(e){this.showAddEditForm();const t=this.goals[""+e];this.initGoalForm("Goals.updateGoal",Object(n["translate"])("Goals_UpdateGoal"),t.name,t.description,t.match_attribute,t.pattern,t.pattern_type,!!t.case_sensitive&&"0"!==t.case_sensitive,parseInt(""+t.revenue,10),!!t.allow_multiple&&"0"!==t.allow_multiple,!!t.event_value_as_revenue&&"0"!==t.event_value_as_revenue,e),this.scrollToTop()},deleteGoal(e){this.goalToDelete=this.goals[""+e],n["Matomo"].helper.modalConfirm(this.$refs.confirm,{yes:()=>{this.isLoading=!0,n["AjaxHelper"].fetch({idGoal:e,method:"Goals.deleteGoal"}).then(()=>{window.location.reload()}).finally(()=>{this.isLoading=!1})}})},save(){const e={};e.name=this.goal.name,e.description=this.goal.description,this.isManuallyTriggered?(e.matchAttribute="manually",e.patternType="regex",e.pattern=".*",e.caseSensitive=0):(e.matchAttribute=this.goal.match_attribute,"event"===e.matchAttribute&&(e.matchAttribute=this.eventType,e.useEventValueAsRevenue=ye(this.goal.event_value_as_revenue)),e.patternType=this.goal.pattern_type,e.pattern=this.goal.pattern,e.caseSensitive=ye(this.goal.case_sensitive)),e.revenue=this.goal.revenue||0,e.allowMultipleConversionsPerVisit=ye(this.goal.allow_multiple),e.idGoal=this.goal.idgoal,e.method=this.apiMethod;const t="Goals.addGoal"===e.method,a="Goals.updateGoal"===e.method,l={};a?n["Matomo"].postEvent("Goals.beforeUpdateGoal",{parameters:e,options:l}):t&&n["Matomo"].postEvent("Goals.beforeAddGoal",{parameters:e,options:l}),null!==e&&void 0!==e&&e.cancelRequest||(this.isLoading=!0,n["AjaxHelper"].fetch(e,l).then(()=>{const e=n["MatomoUrl"].parsed.value.subcategory;"Goals_AddNewGoal"===e&&n["Matomo"].helper.isReportingPage()?n["ReportingMenuStore"].reloadMenuItems().then(()=>{n["MatomoUrl"].updateHash(Object.assign(Object.assign({},n["MatomoUrl"].hashParsed.value),{},{subcategory:"Goals_ManageGoals"})),this.isLoading=!1}):window.location.reload()}).catch(()=>{this.scrollToTop(),this.isLoading=!1}))},changedTriggerType(){this.isManuallyTriggered||this.goal.pattern_type||(this.goal.pattern_type="contains")},initPatternType(){this.isMatchAttributeNumeric?this.goal.pattern_type="greater_than":this.goal.pattern_type="contains"},lcfirst(e){return`${e.slice(0,1).toLowerCase()}${e.slice(1)}`},ucfirst(e){return`${e.slice(0,1).toUpperCase()}${e.slice(1)}`},goalNameChanged(){n["Matomo"].postEvent("Goals.goalNameChanged",this.goal.name)}},computed:{learnMoreAboutGoalTracking(){return Object(n["translate"])("Goals_LearnMoreAboutGoalTrackingDocumentation",Object(n["externalLink"])("https://matomo.org/docs/tracking-goals-web-analytics/"),"</a>")},youCanEnableEcommerceReports(){const e=n["MatomoUrl"].stringify(Object.assign(Object.assign({},n["MatomoUrl"].urlParsed.value),{},{module:"SitesManager",action:"index"})),t=Object(n["externalLink"])("https://matomo.org/docs/ecommerce-analytics/")+Object(n["translate"])("Goals_EcommerceReports")+"</a>",a=`<a href='${e}'>${Object(n["translate"])("SitesManager_WebsitesManagement")}</a>`;return Object(n["translate"])("Goals_YouCanEnableEcommerceReports",t,a)},siteName(){return n["Matomo"].helper.htmlDecode(n["Matomo"].siteName)},whereVisitedPageManuallyCallsJsTrackerText(){return Object(n["translate"])("Goals_WhereVisitedPageManuallyCallsJavascriptTrackerLearnMore",Object(n["externalLink"])("https://developer.matomo.org/guides/tracking-javascript-guide#manually-trigger-goal-conversions"),"</a>")},caseSensitiveTitle(){return`${Object(n["translate"])("Goals_CaseSensitive")} ${Object(n["translate"])("Goals_Optional")}`},useEventValueAsRevenueHelp(){return`${Object(n["translate"])("Goals_EventValueAsRevenueHelp")} <br/><br/> ${Object(n["translate"])("Goals_EventValueAsRevenueHelp2")}`},cancelText(){return Object(n["translate"])("General_OrCancel","<a class='entityCancelLink'>","</a>")},isMatchAttributeNumeric(){return["visit_duration"].indexOf(this.goal.match_attribute)>-1},patternFieldLabel(){return"visit_duration"===this.goal.match_attribute?Object(n["translate"])("Goals_TimeInMinutes"):Object(n["translate"])("Goals_Pattern")},goalMatchAttributeTranslations(){return{manually:Object(n["translate"])("Goals_ManuallyTriggeredUsingJavascriptFunction"),file:Object(n["translate"])("Goals_Download"),url:Object(n["translate"])("Goals_VisitUrl"),title:Object(n["translate"])("Goals_VisitPageTitle"),external_website:Object(n["translate"])("Goals_ClickOutlink"),event_action:`${Object(n["translate"])("Goals_SendEvent")} (${Object(n["translate"])("Events_EventAction")})`,event_category:`${Object(n["translate"])("Goals_SendEvent")} (${Object(n["translate"])("Events_EventCategory")})`,event_name:`${Object(n["translate"])("Goals_SendEvent")} (${Object(n["translate"])("Events_EventName")})`,visit_duration:""+this.ucfirst(Object(n["translate"])("Goals_VisitDuration"))}},beforeGoalListActionsBodyComponent(){if(!this.beforeGoalListActionsBody)return{};const e={};return Object.values(this.goals).forEach(t=>{const a=this.beforeGoalListActionsBody[t.idgoal];a&&(e[t.idgoal]={template:a})}),Object(s["markRaw"])(e)},beforeGoalListActionsHeadComponent(){return this.beforeGoalListActionsHead?Object(s["markRaw"])({template:this.beforeGoalListActionsHead}):null},isManuallyTriggered(){return"manually"===this.triggerType},matchesExpressionExternal(){const e="'http://www.amazon.com\\/(.*)\\/yourAffiliateId'";return Object(n["translate"])("Goals_MatchesExpression",e)}}});_e.render=Oe;var Ge=_e;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
*/}})}));
//# sourceMappingURL=Goals.umd.min.js.map